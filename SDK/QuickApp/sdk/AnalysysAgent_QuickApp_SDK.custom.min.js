"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("@system.fetch")),r=e(require("@system.storage")),a=e(require("@system.device")),n=e(require("@system.network")),s=e(require("@system.router")),o=e(require("@system.app")),u={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$is_first_time","$scene"]},$track:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated"]},$pageview:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$referrer","$scene","$startup_time","$url","$share_id","$share_path","$share_level"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$time_zone","$language","$screen_width","$screen_height","$network","$first_visit_time","$brand","$model","$os","$session_id"]},$userClick:{xcontext:["$element_content","$element_id","$element_type","$element_name","$url","$is_first_day","$session_id","$is_time_calibrated"]}},i={base:{appid:"",$debug:0,$lib_version:"4.3.0",$lib:"Quickapp",uploadURL:"",auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,$share_level:"",$share_path:"",$share_id:"",appProperty:null,allowTimeCheck:!1,maxDiffTimeInterval:30,logflag:!1,userObj:{},userPageObj:{},autoTrack:!1,dataType:""},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},system:{system:{},netWork:{},scene:null},isStartUp:!1,FnCatch:[],FnSuperCatch:[],keywords:u.base.xcontext,baseJson:u.base.outer,sendNum:1800};function c(e){e.responseType=e.dataType,delete e.dataType,t.fetch(e)}var l=Object.freeze({__proto__:null,request:c}),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),m=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},d=function(e){return new Promise((function(t,a){try{r.get({key:e,success:function(e){t(e)},fail:function(e){a(e)}})}catch(e){}})).catch((function(){}))},h=function(e,t){return new Promise((function(a,n){"object"==(void 0===t?"undefined":p(t))&&(t=JSON.stringify(t));try{r.set({key:e,value:t,success:function(){a(200)},fail:function(){n(400)}})}catch(a){}})).catch((function(e){}))},b=Object.freeze({__proto__:null,getStoragePromise:d,setStoragePromise:h});function T(){return new Promise((function(e,t){a.getInfo({success:function(t){var r={brand:t.brand,model:t.model,screenWidth:t.screenWidth,screenHeight:t.screenHeight,language:t.language,version:t.platformVersionCode+"",browser:t.platformVersionName,system:t.osType+" "+t.osVersionName};e(r)},fail:function(){e({brand:"",model:"",screenWidth:"",screenHeight:"",language:"",version:"",system:""})}})})).catch((function(e){}))}var S=Object.freeze({__proto__:null,systemPromise:T});function A(){return new Promise((function(e,t){n.getType({success:function(t){var r={networkType:t.type};e(r)},fail:function(){e({networkType:""})}})})).catch((function(e){}))}var _=Object.freeze({__proto__:null,netWorkPromise:A}),$=[];function k(){var e=o.getInfo();return"object"==(void 0===e?"undefined":p(e))&&"object"==p(e.source)&&e.source.type||""}function R(){var e=o.getInfo();return"object"==(void 0===e?"undefined":p(e))&&"object"==p(e.source)&&e.source.packageName||""}function L(){var e=s.getState(),t="object"==(void 0===e?"undefined":p(e))?e.path:"";return $.push(t),5<$.length&&$.shift(),t}function E(){var e=s.getState();return"object"==(void 0===e?"undefined":p(e))?e.name:""}function I(){return 1<=$.length?$[$.length-1]:k()}var O=Object.freeze({__proto__:null,getScene:k,getPackageName:R,getPath:L,getTitle:E,getReferer:I}),P=function e(){var t=this;y(this,e),this.AppObj={},this.Fetch=l,this.Storage=b,this.System=S,this.Network=_,this.Router=O,this.setPublicApp=function(e){t.AppObj=e},this.getPublicApp=function(){return t.AppObj}},N=new P,D=N.Storage.getStoragePromise,w=N.Storage.setStoragePromise,F=function(){function e(){y(this,e),this.local={},this.Session={},this.localStatus=!1,this.getStoragePromise=N.Storage.getStoragePromise}return f(e,[{key:"initLocalData",value:function(){var e=this;return D("FZ_STROAGE").then((function(t){if(!e.localStatus){if(e.localStatus=!0,"string"==typeof(t=t||{}))try{t=JSON.parse(t)}catch(e){t={}}e.local=Object.assign(t,e.local),w("FZ_STROAGE",e.local).then((function(){}),(function(e){})).catch((function(e){}))}}),(function(){e.local={}})).catch((function(e){}))}},{key:"setData",value:function(e,t){this.Session[e]=t}},{key:"getData",value:function(e){return"undefind"===this.Session[e]?"":this.Session[e]}},{key:"removeData",value:function(e){"undefind"!==this.Session[e]&&delete this.Session[e]}},{key:"clearData",value:function(){this.Session={}}},{key:"setLocal",value:function(e,t){this.local[e]=t;var r=this.local;w("FZ_STROAGE",r).then((function(){}),(function(e){})).catch((function(e){}))}},{key:"getLocal",value:function(e){return this.local[e]}},{key:"removeLocal",value:function(e){if("undefind"!==this.local[e]){delete this.local[e];var t=this.local;w("FZ_STROAGE",t).then((function(){}),(function(){})).catch((function(e){}))}}}]),e}(),j=new F,C=function(){function e(){y(this,e)}return f(e,[{key:"paramType",value:function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")}},{key:"delEmpty",value:function(e){var t=this,r=this.deepClone(e);return"Object"!==this.paramType(r)?{}:(Object.keys(r).forEach((function(e){var a=r[e];"Object"===t.paramType(a)&&(r[e]=t.delEmpty(r[e]),0===Object.keys(r[e]).length&&delete r[e]),""===a&&delete r[e]})),r)}},{key:"deepClone",value:function(e){var t=Object.getPrototypeOf(e);return Object.assign({},Object.create(t),e)}},{key:"mergeMsg",value:function(e,t){Object.assign(t,e)}},{key:"checkObj",value:function(e,t){var r={};if(1!==arguments.length||e.constructor!==Array)return 1===arguments.length&&e.constructor===String?r[e]=t||"":1<arguments.length&&e.constructor!==Object?r[e]=t:r=e,r;for(var a=0;a<e.length;a++)r[e[a]]="";return r}},{key:"isFristDay",value:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var a=e.getDate(),n=t+""+r+(a=a<10?"0"+a:a),s=j.getLocal("FRISTDAY");return!(s&&n!==s||(s||j.setLocal("FRISTDAY",n),0))}},{key:"isFristTime",value:function(){var e=!1!==j.getLocal("FRISTIME");return e&&j.setLocal("FRISTIME",!1),e}},{key:"isEmptyObject",value:function(e){return!(0<Object.keys(e).length)}},{key:"setFristDay",value:function(){if("String"!==this.paramType(j.getLocal("FRISTDAY"))){var e=this.format(new Date,"yyyyMMdd");i.base.allowTimeCheck&&i.base.logflag&&(e=this.format(new Date(+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd")),j.setLocal("FRISTDAY",e)}}},{key:"setFristTime",value:function(){"Boolean"!==this.paramType(j.getLocal("FRISTIME"))&&j.setLocal("FRISTIME",!0)}},{key:"delFristDay",value:function(){j.removeLocal("FRISTDAY")}},{key:"delFristTime",value:function(){j.removeLocal("FRISTIME")}},{key:"checkURL",value:function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)}},{key:"firstVisitTime",value:function(){var e=!1!==j.getLocal("FIRSTVISITTIME");return e&&j.setLocal("FIRSTVISITTIME",!1),e}},{key:"toDeepObj",value:function(e,t){var r={};if("String"===this.paramType(e))return this.keyValueToObje(e,t);if("Array"===this.paramType(e))return this.ArrayToObj(e);if("Object"===this.paramType(e))for(var a in e)r[a]=this.toDeepObj(e[a]);return r}},{key:"ArrayToObj",value:function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t}},{key:"keyValueToObje",value:function(e,t){var r={};return r[e]=t,r}},{key:"toObj",value:function(e,t){var r={};return"String"===this.paramType(e)?r=this.keyValueToObje(e,t):"Array"===this.paramType(e)?r=this.ArrayToObj(e):"Object"===this.paramType(e)?e:r}},{key:"objMerge",value:function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]&&"Object"===this.paramType(r[a])&&"Object"===this.paramType(t[a])?r[a]=this.objMerge(r[a],t[a]):"Array"===this.paramType(r[a])&&"Array"===this.paramType(t[a])?r[a]=this.arrayMergeUnique(r[a],t[a]):r[a]=t[a];return r}},{key:"arrayUnique",value:function(e){for(var t=[],r={},a=0;a<e.length;a++)r[e[a]]||(r[e[a]]=!0,t.push(e[a]));return t}},{key:"arrayMerge",value:function(e,t){return e.push.apply(e,t),e}},{key:"arrayMergeUnique",value:function(e,t){return e.push.apply(e,t),this.arrayUnique(e)}},{key:"format",value:function(e,t){var r=e.getTimezoneOffset(),a={"M+":(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+a[n]).length<3?("00"+a[n]).substr(("00"+a[n]).length-3,("00"+a[n]).length):a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}},{key:"objHasKay",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"clientTimeZone",value:function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,a="-";return(t<=0||r<0)&&(a="+",t=-t,r<0&&(r=-r)),1==(t+="").length&&(t="0"+t),1==(r+="").length&&(r="0"+r),a+t+":"+r}},{key:"objInArray",value:function(e){var t=[];return t.push(e),t}},{key:"stringSlice",value:function(e,t){return e.slice(0,t)}}]),e}(),x=new C,M={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"DebugMode only can be 0,1,2",600021:"{FN}:Property value invalid of key[{KEY}], support type: Object, Object.keys length needs to be 1-499 \ncurrent length:{VALUE}\n"},K={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys "+i.base.$lib+" sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准"};function U(e){if(1===i.base.$debug||2===i.base.$debug){var t=i.status,r=t.successCode,a=t.FnName,n=t.key,s=t.value,o=(K[r]||K.common).replace(/{FN}/,a).replace(/{KEY}/g,n).replace(/{VALUE}/g,s);if(e&&(o=e),!o)return;if("Object"===x.paramType(console)&&console.log)try{return console.log.apply(console,o)}catch(e){console.log(o)}}}function V(){var e=i.status,t=e.errorCode,r=e.FnName,a=e.key,n=JSON.stringify(e.value),s=x.paramType(e.value),o=x.paramType(a),u=(M[t]||M.common).replace(/{FN}/g,r).replace(/{KEY}/g,JSON.stringify(a)).replace(/{VALUE}/g,n).replace(/{VALUETYPE}/g,s).replace(/{KEYTYPE}/g,o);1!==i.base.$debug&&2!==i.base.$debug||console.warn(u)}var Y=function(){function e(){y(this,e)}return f(e,[{key:"isString",value:function(e){return i.status.errorCode="60001","String"===x.paramType(e)}},{key:"isNumber",value:function(e){return i.status.errorCode="60002","Number"===x.paramType(e)}},{key:"isBoolean",value:function(e){return i.status.errorCode="60003","Boolean"===x.paramType(e)}},{key:"isObject",value:function(e){return"Object"===x.paramType(e)}},{key:"lengthRule",value:function(e,t,r){this.isNumber(r)||(r=1/0);var a=!0;return this.isNumber(t)&&e.length&&e.length>t&&e.length<r+1||(a=!(i.status.errorCode="60005")),a}},{key:"nimLength",value:function(e){return this.lengthRule(e,0)}},{key:"length99",value:function(e){var t=this.lengthRule(e,0,99);return t||(i.status.errorCode="600010"),t}},{key:"length125",value:function(e){var t=this.lengthRule(e,0,125);return t||(i.status.errorCode="60009"),t}},{key:"length255",value:function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return!(i.status.errorCode="60005");"String"!==x.paramType(e)&&(e=e.toString());var t=this.lengthRule(e,0,255);return t||(i.status.errorCode="600019"),t}},{key:"keyLength255",value:function(e){var t=this.length255(e);return t||(i.status.errorCode="600017"),t}},{key:"isURL",value:function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)||!(i.status.errorCode="60006")}},{key:"isDebug",value:function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)}},{key:"notObject",value:function(e){return!this.isObject(e)}},{key:"notSpecialCharacters",value:function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||!(i.status.errorCode="600011")}},{key:"isArrayString",value:function(e){if("Array"===x.paramType(e))for(var t=0;t<e.length;t++){if(i.status.value=e[t],"String"!==x.paramType(e[t]))return!(i.status.errorCode="600013");if(!this.length255(e[t]))return!1}return!0}},{key:"keywords",value:function(e){var t=i.keywords;return i.status.errorCode="600012",!(-1<t.indexOf(e))}}]),e}(),q=new Y;function G(e,t){var r=e;function a(e,t){return e<<t|e>>>32-t}function n(e,t){var r,a,n,s,o;return n=2147483648&e,s=2147483648&t,o=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(a=1073741824&t)?2147483648^o^n^s:r|a?1073741824&o?3221225472^o^n^s:1073741824^o^n^s:o^n^s}function s(e,t,r,s,o,u,i){return n(a(e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,r,s),o),i)),u),t)}function o(e,t,r,s,o,u,i){return n(a(e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,r,s),o),i)),u),t)}function u(e,t,r,s,o,u,i){return n(a(e=n(e,n(n(function(e,t,r){return e^t^r}(t,r,s),o),i)),u),t)}function i(e,t,r,s,o,u,i){return n(a(e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,r,s),o),i)),u),t)}function c(e){var t="",r="",a=void 0;for(a=0;a<=3;a++)t+=(r="0"+(e>>>8*a&255).toString(16)).substr(r.length-2,2);return t}var l=Array(),p=void 0,y=void 0,f=void 0,m=void 0,v=void 0,g=void 0,d=void 0,h=void 0,b=void 0;for(l=function(e){for(var t=void 0,r=e.length,a=r+8,n=16*(1+(a-a%64)/64),s=Array(n-1),o=0,u=0;u<r;)o=u%4*8,s[t=(u-u%4)/4]=s[t]|e.charCodeAt(u)<<o,u++;return o=u%4*8,s[t=(u-u%4)/4]=s[t]|128<<o,s[n-2]=r<<3,s[n-1]=r>>>29,s}(r),g=1732584193,d=4023233417,h=2562383102,b=271733878,p=0;p<l.length;p+=16)d=i(d=i(d=i(d=i(d=u(d=u(d=u(d=u(d=o(d=o(d=o(d=o(d=s(d=s(d=s(d=s(f=d,h=s(m=h,b=s(v=b,g=s(y=g,d,h,b,l[p+0],7,3614090360),d,h,l[p+1],12,3905402710),g,d,l[p+2],17,606105819),b,g,l[p+3],22,3250441966),h=s(h,b=s(b,g=s(g,d,h,b,l[p+4],7,4118548399),d,h,l[p+5],12,1200080426),g,d,l[p+6],17,2821735955),b,g,l[p+7],22,4249261313),h=s(h,b=s(b,g=s(g,d,h,b,l[p+8],7,1770035416),d,h,l[p+9],12,2336552879),g,d,l[p+10],17,4294925233),b,g,l[p+11],22,2304563134),h=s(h,b=s(b,g=s(g,d,h,b,l[p+12],7,1804603682),d,h,l[p+13],12,4254626195),g,d,l[p+14],17,2792965006),b,g,l[p+15],22,1236535329),h=o(h,b=o(b,g=o(g,d,h,b,l[p+1],5,4129170786),d,h,l[p+6],9,3225465664),g,d,l[p+11],14,643717713),b,g,l[p+0],20,3921069994),h=o(h,b=o(b,g=o(g,d,h,b,l[p+5],5,3593408605),d,h,l[p+10],9,38016083),g,d,l[p+15],14,3634488961),b,g,l[p+4],20,3889429448),h=o(h,b=o(b,g=o(g,d,h,b,l[p+9],5,568446438),d,h,l[p+14],9,3275163606),g,d,l[p+3],14,4107603335),b,g,l[p+8],20,1163531501),h=o(h,b=o(b,g=o(g,d,h,b,l[p+13],5,2850285829),d,h,l[p+2],9,4243563512),g,d,l[p+7],14,1735328473),b,g,l[p+12],20,2368359562),h=u(h,b=u(b,g=u(g,d,h,b,l[p+5],4,4294588738),d,h,l[p+8],11,2272392833),g,d,l[p+11],16,1839030562),b,g,l[p+14],23,4259657740),h=u(h,b=u(b,g=u(g,d,h,b,l[p+1],4,2763975236),d,h,l[p+4],11,1272893353),g,d,l[p+7],16,4139469664),b,g,l[p+10],23,3200236656),h=u(h,b=u(b,g=u(g,d,h,b,l[p+13],4,681279174),d,h,l[p+0],11,3936430074),g,d,l[p+3],16,3572445317),b,g,l[p+6],23,76029189),h=u(h,b=u(b,g=u(g,d,h,b,l[p+9],4,3654602809),d,h,l[p+12],11,3873151461),g,d,l[p+15],16,530742520),b,g,l[p+2],23,3299628645),h=i(h,b=i(b,g=i(g,d,h,b,l[p+0],6,4096336452),d,h,l[p+7],10,1126891415),g,d,l[p+14],15,2878612391),b,g,l[p+5],21,4237533241),h=i(h,b=i(b,g=i(g,d,h,b,l[p+12],6,1700485571),d,h,l[p+3],10,2399980690),g,d,l[p+10],15,4293915773),b,g,l[p+1],21,2240044497),h=i(h,b=i(b,g=i(g,d,h,b,l[p+8],6,1873313359),d,h,l[p+15],10,4264355552),g,d,l[p+6],15,2734768916),b,g,l[p+13],21,1309151649),h=i(h,b=i(b,g=i(g,d,h,b,l[p+4],6,4149444226),d,h,l[p+11],10,3174756917),g,d,l[p+2],15,718787259),b,g,l[p+9],21,3951481745),g=n(g,y),d=n(d,f),h=n(h,m),b=n(b,v);return 32==t?c(g)+c(d)+c(h)+c(b):c(d)+c(h)}var J=function(){function e(){y(this,e),this.sessionId="",this.sessionDate=""}return f(e,[{key:"setId",value:function(){var e=+new Date;return this.sessionId=G("WeChat"+e.toString()+Math.random(0,1e7)),this.sessionDate=e,j.setLocal("SEESIONID",this.sessionId),j.setLocal("SEESIONDATE",this.sessionDate),this.sessionId}},{key:"getId",value:function(){var e=new Date,t=e.getTime(),r=e.getTimezoneOffset(),a=new Date(t+60*r*1e3+288e5).getDate();this.sessionDate=j.getLocal("SEESIONDATE")||0;var n=0===this.sessionDate?0:new Date(this.sessionDate+60*r*1e3+288e5).getDate();return(""===this.sessionId||0===this.sessionDate||18e5<Number(t)-Number(this.sessionDate)||n!==a)&&this.setId(),this.sessionDate=t,j.setLocal("SEESIONDATE",t),this.sessionId=j.getLocal("SEESIONID")||this.setId(),this.sessionId}}]),e}(),W=new J,B=function(){function e(){y(this,e)}return f(e,[{key:"getId",value:function(){var e=j.getLocal("ARK_LOGINID")||j.getLocal("ARK_TRACKID")||j.getLocal("ARK_ID");return e||(e=this.setId(),j.setLocal("ARK_ID",e)),e}},{key:"setId",value:function(){var e=new String((new Date).getTime())+new String(1e4*Math.random());return"QK"+G(new String(e),32)+G(new String(e),32).slice(0,4)}},{key:"jsId",value:function(){var e=j.getLocal("ARK_ID");return e||this.setId()}},{key:"removeARKId",value:function(){j.removeLocal("ARK_ID")}},{key:"setLoginId",value:function(e){e&&j.setLocal("ARK_LOGINID",e)}},{key:"setLoginOId",value:function(e){e&&j.setLocal("ARK_LOGINOID",e)}},{key:"getLoginOId",value:function(){return j.getLocal("ARK_LOGINOID")}},{key:"getLoginId",value:function(){return j.getLocal("ARK_LOGINID")}},{key:"removeLoginId",value:function(){j.removeLocal("ARK_LOGINID")}},{key:"setTrackId",value:function(e){e&&j.setLocal("ARK_TRACKID",e)}},{key:"getTrackId",value:function(){return j.getLocal("ARK_TRACKID")}},{key:"removeTrackId",value:function(){j.removeLocal("ARK_TRACKID")}},{key:"getAliasId",value:function(){return j.getLocal("ARK_LOGINID")}},{key:"removeAliasId",value:function(){j.removeLocal("ARK_LOGINID")}},{key:"setIdentifyId",value:function(e){j.setLocal("ARK_TRACKID",e)}},{key:"getIdentifyId",value:function(){return j.getLocal("ARK_TRACKID")}},{key:"removeIdentifyId",value:function(){j.removeLocal("ARK_TRACK_LOGIN")}}]),e}(),z=new B,H={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""};function Z(){H={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}var Q=N.Router.getPath,X=N.Router.getScene,ee=N.Router.getPackageName,te=N.Router.getTitle,re=N.Router.getReferer,ae=i.base;function ne(){return ae.appid}function se(){return ae.$debug}function oe(){return z.getId()}function ue(e){return"/"!==ae.uploadURL.charAt(ae.uploadURL.length-1)&&(ae.uploadURL+="/"),ae.uploadURL}function ie(){return i.base.allowTimeCheck&&i.base.logflag?+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0):+new Date}function ce(){return!!(j.getLocal("ANSSERVERTIME")&&i.base.allowTimeCheck&&i.base.logflag)}function le(){return i.status.FnName}function pe(){return!(!z.getAliasId()&&!j.getLocal("ARK_TRACK_LOGIN"))}function ye(){return i.system.system.screenWidth||""}function fe(){return i.system.system.screenHeight||""}function me(){return i.system.system.system?i.system.system.system.split(" ")[0]:""}function ve(){return i.system.system.brand||""}function ge(){return i.system.system.browser||""}function de(){return i.system.system.version||""}function he(){return i.system.system.system?i.system.system.system.split(" ")[1]:""}function be(){return i.system.system.model||""}function Te(){return i.system.system.language||""}function Se(){return i.system.netWork.networkType}function Ae(){return re()||X()}var _e="GMT"+x.clientTimeZone();function $e(){return W.getId()}function ke(){var e=j.getLocal("FRISTIME");return j.setLocal("FRISTIME",!1),null==e||e}function Re(){var e=new Date;i.base.allowTimeCheck&&i.base.logflag&&(e=new Date(+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)));var t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var a=e.getDate(),n=t+""+r+(a=a<10?"0"+a:a),s=j.getLocal("FRISTDAY");return!(s&&n!==s||(j.setLocal("FRISTDAY",n),0))}function Le(){var e=x.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");return i.base.allowTimeCheck&&i.base.logflag&&(e=x.format(new Date(+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS")),j.getLocal("ARKFRISTPROFILE")&&(e=j.getLocal("ARKFRISTPROFILE")),e}function Ee(){return z.getTrackId()||z.jsId()}function Ie(){return Q()||""}function Oe(){return ae.$lib_version}var Pe=j.getData("UTMSESSION")||"";function Ne(){return H.utm_campaign_id}function De(){return H.utm_source}function we(){return H.utm_medium}function Fe(){return H.utm_term}function je(){return H.utm_content}function Ce(){return H.utm_campaign}function xe(){var e=parseInt(i.base.$share_level);return 0===e||e?e:""}function Me(){return i.base.$share_path}function Ke(){return i.base.$share_id}function Ue(){var e=i.base.userObj,t=i.base.userPageObj;return e.currentTarget?(e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.content||"")+"":(t.text||"")+""}function Ve(){var e=i.base.userObj;return(e.currentTarget&&e.currentTarget.id||"")+""}function Ye(){var e=i.base.userObj;return(e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.type||"")+""}function qe(){var e=i.base.userObj;return(e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.name||"")+""}H.utm_campaign&&H.utm_source&&H.utm_medium?(Pe!==JSON.stringify(H)&&W.setId(),j.setData("UTMSESSION",JSON.stringify(H))):(Z(),j.removeData("UTMSESSION"));var Ge={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:ue,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:ne,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},xwho:{valueType:0,value:oe,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:ie},xwhat:{valueType:0,value:le,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"Quickapp"},$lib_version:{valueType:0,value:Oe,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"Quickapp"},$debug:{valueType:0,value:se,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:pe,check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:ye,check:{value:["isNumber"]}},$screen_height:{valueType:0,value:fe,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:_e},$os:{valueType:0,value:me,check:{value:["isString"]}},$browser:{valueType:0,value:ge},$brand:{valueType:0,value:ve,check:{value:["isString"]}},$browser_version:{valueType:0,value:de,check:{value:["isString"]}},$os_version:{valueType:0,value:he,check:{value:["isString"]}},$model:{valueType:0,value:be,check:{value:["isString"]}},$language:{valueType:0,value:Te,check:{value:["isString"]}},$network:{valueType:0,value:Se,check:{value:["isString"]}},$session_id:{valueType:0,value:$e},$scene:{valueType:0,value:X},$referrer:{valueType:0,value:Ae},$startup_time:{valueType:0,value:Le},$is_first_time:{valueType:0,value:ke},$is_first_day:{valueType:0,value:Re},$first_visit_time:{valueType:0,value:Le},$original_id:{valueType:0,value:Ee,check:{value:["isString"]}},$is_time_calibrated:{valueType:0,value:ce},$url:{valueType:0,value:Ie},$utm_campaign_id:{valueType:0,value:Ne},$utm_source:{valueType:0,value:De},$utm_medium:{valueType:0,value:we},$utm_term:{valueType:0,value:Fe},$utm_content:{valueType:0,value:je},$utm_campaign:{valueType:0,value:Ce},$share_id:{valueType:0,value:Ke},$share_level:{valueType:0,value:xe},$share_path:{valueType:0,value:Me},$element_content:{valueType:0,value:Ue},$element_id:{valueType:0,value:Ve},$element_type:{valueType:0,value:Ye},$element_name:{valueType:0,value:qe}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}};function Je(e,t){for(var r=0;r<t.length;r++)if(!q[t[r]](e))return!1;return!0}function We(e,t,r){var a=r.check,n=!0;if(!a)return n;var s=a.key,o=a.value;if(s&&(n=Je(e,s),i.status.key=e,n||(i.status.code=400,V())),o){if(i.status.code=200,t&&"Array"==x.paramType(t)){i.status.key=e;for(var u=0;u<t.length;u++)(n=Je(t[u],["isString","length255"]))||(i.status.value=t[u],"String"!==x.paramType(t[u])&&(i.status.errorCode="600013"),500<t[u].length&&(t[u]=x.stringSlice(t[u],499)+"$"),i.status.code=400,V());return n}n=Je(t,o),"Array"!==x.paramType(t)&&(i.status.value=t),n||(i.status.code=400,V())}return n}function Be(e,t){var r=t||Ge,a={};for(var n in e){var s=e[n],o=r[n];if(o){var u="";if("Object"===x.paramType(s)){var i=Be(s,o);a[n]=i}else x.objHasKay(o,"valueType")&&(0===o.valueType&&(u=o.value(),"String"==x.paramType(u)&&500<u.length?a[n]=x.stringSlice(u,499)+"$":a[n]=u),1===o.valueType&&(u=o.value,"String"==x.paramType(u)&&500<u.length?a[n]=x.stringSlice(u,499)+"$":a[n]=u))}}return a}function ze(){i.status={code:200,FnName:i.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function He(e){if(!(e=e||!1)){var t=i.base;for(var r in t)"Object"!==x.paramType(t[r])&&("$debug"!==r&&"appid"!==r&&"uploadURL"!==r||(Storage.getLocal("ANS"+r.toUpperCase())!==t[r]&&(e=!0),e&&Storage.setLocal("ANS"+r.toUpperCase(),t[r])))}if(e){if(j.removeLocal("ARKSUPER"),j.removeData("STARTUP"),j.setLocal("FRISTDAY",x.format(new Date,"yyyyMMdd")),i.base.allowTimeCheck&&i.base.logflag){var a=x.format(new Date(+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd");j.setLocal("FRISTDAY",a)}j.setLocal("FRISTIME",!0),j.removeLocal("POSTDATA"),j.removeLocal("ANSSERVERTIME"),j.removeLocal("ARKFRISTPROFILE"),j.removeLocal("ARKFRISTPROFILESEND")}return e}function Ze(e,t,r,a){ze();var n=Ge[t]||Ge.xcontextCommonRule;if("Object"!==x.paramType(e)||1==r){var s=Je(e,n.check.key);return i.status.key=e,!(!s&&(V(),"aliasId"==a||"distinctId"==a))}for(var o in 0==Object.keys(e).length&&(i.status.errorCode=600021,i.status.value=0,V()),e)s=We(o,e[o],n),"$lib"!=o&&"$lib_version"!=o&&"$platform"!=o||(e[o]=i.base[o]),s||"600019"===i.status.errorCode&&500<e[o].length&&(e[o]=x.stringSlice(e[o],499)+"$");return!0}for(var Qe=[],Xe=u||{},et=0;et<Qe.length;et++)Xe=x.objMerge(u,Qe[et]);var tt={},rt={},at=Xe.base,nt=at.outer;for(et=0;et<nt.length;et++)at[nt[et]]?rt[nt[et]]=x.toObj(at[nt[et]]):rt[nt[et]]="";for(var st in Xe)"base"!=st&&(tt[st]=x.objMerge(rt,x.toDeepObj(Xe[st])));function ot(e){return tt[e]||tt.commonTemp}tt.commonTemp=rt;var ut=N.getPublicApp,it=N.Fetch.request,ct=!0;function lt(e){if("Object"!==x.paramType(e)||x.isEmptyObject(e))return!1;for(var t=!0,r=0;r<i.baseJson.length;r++){var a=i.baseJson[r];"xwhat"!==a&&(!e[a]||"Object"==x.paramType(e[a])&&x.isEmptyObject(e[a]))&&(t=!1)}return t}function pt(e){if(""==i.base.appid)return i.status.errorCode="60006",void V();if(""===i.base.uploadURL)return i.status.errorCode="60007",void V();var t=j.getLocal("POSTDATA")||[],r=[];if(0<t.length)for(var a=0;a<t.length;a++)"Array"===x.paramType(t[a])?r.push.apply(r,t[a]):"Object"===x.paramType(t[a])&&lt(t[a])&&r.push(t[a]);t.length<=500&&0<Object.keys(e).length&&r.push(e),j.setLocal("POSTDATA",r),!0===ct&&yt(r)}function yt(e){j.removeLocal("POSTDATA"),ze(),ct=!1;var t=e,r={url:i.base.uploadURL+"?appid="+i.base.appid,data:e,encryptType:i.base.encryptType};ut()&&ut().AnalysysAgent.encrypt&&"Function"===x.paramType(ut().AnalysysAgent.encrypt.uploadData)&&(r=ut().AnalysysAgent.encrypt.uploadData(r)),i.status.key=r.url,i.status.value=JSON.stringify(e),i.status.successCode="20012",U(),it({url:r.url,method:"POST",data:JSON.stringify(r.data),dataType:i.base.dataType||"json",success:function(e){if(ct=!0,"String"==x.paramType(e.data)&&(ut().AnalysysAgent.encrypt&&"Function"==x.paramType(ut().AnalysysAgent.encrypt.decodeRes)?e.data=JSON.parse(ut().AnalysysAgent.encrypt.decodeRes(e.data)):"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="==e.data?e.data={code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="==e.data?e.data={code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="==e.data?e.data={code:420}:e.data={code:200}),200==e.data.code||500==e.data.code||420==e.data.code){var r=j.getLocal("POSTDATA")||[];0<r.length&&yt(r),200==e.data.code?(i.status.successCode="20001",U()):(i.status.errorCode="60008",V())}else{i.status.errorCode="60008",V();var a=j.getLocal("POSTDATA")||[],n=[].concat(g(t),g(a));j.setLocal("POSTDATA",n),0<a.length&&yt(n)}},fail:function(){ct=!0,i.status.errorCode="60008",V();var e=j.getLocal("POSTDATA")||[],r=[].concat(g(t),g(e));j.setLocal("POSTDATA",r),0<e.length&&yt(r)}})}function ft(e,t){i.status.FnName="$profile_set_once",ze();var r=x.toObj(e,t);Ze(r);var a=Be(ot("$profile_set_once"));(a=x.delEmpty(a)).xcontext=x.objMerge(a.xcontext,r),pt(a)}function mt(e,t){i.status.FnName="$pageview",ze();var r={$title:""};0<arguments.length&&Ze(r={$title:e}),1<arguments.length&&Ze(t);var a=Be(ot("$pageview"));a=x.delEmpty(a);var n=j.getLocal("ARKSUPER")||{};0<Object.keys(n).length&&(a.xcontext=x.objMerge(a.xcontext,n));var s=i.base.appProperty;"Object"==x.paramType(s)&&s&&(a.xcontext=x.objMerge(a.xcontext,s)),a.xcontext=x.objMerge(a.xcontext,t||{}),e&&"String"==x.paramType(e)&&(a.xcontext=x.objMerge(a.xcontext,r||{})),pt(a)}function vt(e){var t=x.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");i.base.allowTimeCheck&&i.base.logflag&&(t=x.format(new Date(+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS"));var r={$first_visit_time:j.getLocal("ARKFRISTPROFILE")||t,$first_visit_language:Te()},a=i.base.autoProfile,n=i.base.auto;if("startUp"==e){if(!0===a&&0==(j.getLocal("ARKFRISTPROFILESEND")||!1)){j.setLocal("ARKFRISTPROFILESEND",!0),i.status.FnName="$profile_set_once",ze();var s=Be(ot("$profile_set_once"));(s=x.delEmpty(s)).xcontext=x.objMerge(s.xcontext,r);var o=j.getLocal("POSTDATA");o=[].concat(g(o),g(x.objInArray(s))),j.setLocal("POSTDATA",o)}!0===n?mt():pt({})}else{if("alias"!=e)return;1==i.base.autoProfile&&(j.setLocal("ARKFRISTPROFILESEND",!0),ft(r))}}var gt=N.setPublicApp;function dt(e){var t=e;e&&"create"==e._status&&(gt(e),t=e.options),t.query&&0<Object.keys(t.query).length&&(t.query.utm_campaign&&t.query.utm_medium&&t.query.utm_source&&(H.utm_campaign_id=t.query.campaign_id,H.utm_campaign=t.query.utm_campaign,H.utm_content=t.query.utm_content,H.utm_medium=t.query.utm_medium,H.utm_source=t.query.utm_source,H.utm_term=t.query.utm_term),t.query.share_id&&t.query.share_level&&t.query.share_path&&(i.base.$share_id=t.query.share_id,i.base.$share_level=t.query.share_level,i.base.$share_path=decodeURIComponent(t.query.share_path))),t.scene&&(i.system.scene=e.scene)}function ht(e){e&&dt(e);var t=j.getLocal("ARKAPPID"),r=j.getLocal("ARKDEBUG"),a=j.getLocal("ARKUPLOADURL");if(t&&"Number"==x.paramType(r)&&a&&(t!==i.base.appid||1===r&&r!==i.base.$debug||a!==i.base.uploadURL)&&(x.delFristDay(),x.delFristTime(),j.removeLocal("ARKFRISTPROFILE"),j.removeLocal("ARKFRISTPROFILESEND"),z.removeLoginId(),z.removeTrackId(),j.removeLocal("ARK_TRACK_LOGIN"),j.removeLocal("ARKSUPER"),j.removeData("STARTUP"),j.removeData("STARTUPTIME"),j.removeLocal("POSTDATA")),x.setFristDay(),x.setFristTime(),i.base.allowTimeCheck||j.removeLocal("ANSSERVERTIME"),j.setLocal("ARKDEBUG",i.base.$debug),j.setLocal("ARKAPPID",i.base.appid),j.setLocal("ARKUPLOADURL",i.base.uploadURL),!1!==j.getData("STARTUP")){for(var n=i.FnSuperCatch,s=0;s<n.length;s++)n[s][0].apply(n[s][0],n[s][1]);i.FnSuperCatch=[],i.isStartUp=!0,i.status.FnName="$startup",ze(),W.setId(),j.setData("STARTUP",!1);var o=Be(ot("$startup"));o=x.delEmpty(o),j.getLocal("ARKFRISTPROFILE")||j.setLocal("ARKFRISTPROFILE",x.format(new Date(o.xwhen),"yyyy-MM-dd hh:mm:ss.SSS"));var u=j.getLocal("ARKSUPER")||{};o.xcontext=x.objMerge(o.xcontext,u);var c=i.base.appProperty||{};if(o.xcontext=x.objMerge(o.xcontext,c),j.setData("STARTUPTIME",x.format(new Date(o.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),1!=i.base.autoProfile&&1!=i.base.auto)pt(o);else{var l=j.getLocal("POSTDATA")||[];l=[].concat(g(l),g(x.objInArray(o))),j.setLocal("POSTDATA",l),vt("startUp")}var p=i.FnCatch;for(s=0;s<p.length;s++)p[s][0].apply(p[s][0],p[s][1]);i.FnCatch=[]}else 1==i.base.auto&&mt()}function bt(e,t){i.status.FnName="$registerSuperProperty",ze();var r=x.toObj(e,t);Ze(r);var a=j.getLocal("ARKSUPER")||{},n=x.objMerge(a,r);j.setLocal("ARKSUPER",n),i.status.successCode="20002",i.status.value=JSON.stringify(r),U()}function Tt(e){i.status.FnName="$unregisterSuperProperty",ze(),Ze(e);var t=j.getLocal("ARKSUPER")||{};if(!t.hasOwnProperty(e))return i.status.successCode="20011",i.status.value=e,void U();delete t[e],j.setLocal("ARKSUPER",t),i.status.successCode="20003",i.status.value=e,U()}function St(e,t){i.status.FnName="$registerSuperProperties",ze();var r=x.toObj(e,t);Ze(r);var a=j.getLocal("ARKSUPER")||{},n=x.objMerge(a,r);j.setLocal("ARKSUPER",n),i.status.successCode="20002",i.status.value=JSON.stringify(r),U()}function At(e){i.status.FnName="$getSuperProperty",ze(),Ze(e,"$getSuperProperty",!0);var t=j.getLocal("ARKSUPER")||{},r=t[e];return t.hasOwnProperty(e)?(i.status.successCode="20010",i.status.value=r,i.status.key=e,U(),r):(i.status.successCode="20009",i.status.key=e,U(),"")}function _t(){i.status.FnName="$getSuperProperties",ze();var e=j.getLocal("ARKSUPER")||{};return i.status.successCode="20010",i.status.value=JSON.stringify(e),U(),e}function $t(){i.status.FnName="$clearSuperProperties",ze(),j.setLocal("ARKSUPER",{}),i.status.successCode="20004",U()}function kt(e){if(i.status.FnName="$alias",ze(),Ze(e,"$alias",!0,"aliasId")){j.setLocal("ARK_LOGINID",e);var t=Be(ot("$alias"));t=x.delEmpty(t),1!=i.base.autoProfile?pt(t):(j.setLocal("POSTDATA",x.objInArray(t)),vt("alias"))}}function Rt(e,t){i.status.FnName=e,ze(),Ze(e,"$track",!0),1<arguments.length&&Ze(t);var r=Be(ot("$track")),a=j.getLocal("ARKSUPER")||{};r.xcontext=x.delEmpty(r.xcontext),0<Object.keys(a).length?(a=x.objMerge(a,t),r.xcontext=x.objMerge(r.xcontext,a)):r.xcontext=x.objMerge(r.xcontext,t),pt(r)}function Lt(e,t){i.status.FnName="$identify",ze(),Ze(e,"$alias",!0,"distinctId")&&(!0===t&&j.setLocal("ARK_TRACK_LOGIN",!0),j.setLocal("ARK_TRACKID",e),i.status.successCode="20002",i.status.value=e,U())}function Et(){var e=x.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");i.base.allowTimeCheck&&i.base.logflag&&(e=+new Date+(j.getLocal("ANSSERVERTIME")?Number(j.getLocal("ANSSERVERTIME")):0)),e=x.format(new Date(e),"yyyy-MM-dd hh:mm:ss.SSS"),ze(),z.removeARKId(),z.removeTrackId(),z.removeLoginId(),z.removeIdentifyId(),$t(),He(!0),W.setId(),!0===i.base.autoProfile&&ft({$reset_time:e}),i.status.FnName="$reset",i.status.successCode="20005",U()}function It(e,t){i.status.FnName="$profile_set",ze();var r=x.toObj(e,t);Ze(r);var a=Be(ot("$profile_set"));(a=x.delEmpty(a)).xcontext=x.objMerge(a.xcontext,r),pt(a)}function Ot(e,t){i.status.FnName="$profile_increment",ze();var r=x.toObj(e,t);Ze(r,"$profile_increment");var a=Be(ot("$profile_increment"));(a=x.delEmpty(a)).xcontext=x.objMerge(a.xcontext,r),pt(a)}function Pt(e,t){i.status.FnName="$profile_append",ze();var r=x.toObj(e,t);Ze(r);var a=Be(ot("$profile_append"));(a=x.delEmpty(a)).xcontext=x.objMerge(a.xcontext,r),pt(a)}function Nt(e){i.status.FnName="$profile_unset",ze();var t=x.toObj(e,"");Ze(t,"$profile_unset");var r=Be(ot("$profile_unset"));(r=x.delEmpty(r)).xcontext=x.objMerge(r.xcontext,t),pt(r)}function Dt(){i.status.FnName="$profile_delete",ze();var e=Be(ot("$profile_delete"));pt(e=x.delEmpty(e))}var wt=N.Fetch.request,Ft=function(){return new Promise((function(e){if(ze(),!i.base.allowTimeCheck)return e();var t=i.base.uploadURL;t=t.split("up")[0],wt({url:t+"configure",method:"GET",success:function(t){e(t);var r=t.header||t.headers;if(r&&r.Date){var a=+new Date,n=r.Date,s=i.base.maxDiffTimeInterval;s<0&&(s=30),n&&s<Math.abs((+new Date(n)-a)/1e3)&&(i.base.logflag||(j.setLocal("ANSSERVERTIME",+new Date(n)-a),i.status.successCode="20013",i.status.value=x.format(new Date(n),"yyyy-MM-dd hh:mm:ss +SSS"),i.status.key=x.format(new Date(a),"yyyy-MM-dd hh:mm:ss +SSS"),i.status.FnName=(+new Date(n)-a)/1e3+"s",U(),i.base.logflag=!0))}},fail:function(t){e(t)}})})).catch((function(e){}))},jt=N.System.systemPromise,Ct=N.Network.netWorkPromise;function xt(e,t){var r=z.getId(),a=N.Router.getPath();"Object"!==x.paramType(e)&&(e={path:a}),Promise.all([jt(),Ct(),Ft(),j.initLocalData()]).then((function(e){var n=parseInt(i.base.$share_level)?parseInt(i.base.$share_level):"",s={$share_id:r,$share_level:Number(n)+1,$share_path:a};"Object"===x.paramType(t)&&(s=x.objMerge(s,t)),Rt("$share",s)}));var n="share_id="+r+"&share_level="+(Number(i.base.$share_level)+1)+"&share_path="+encodeURIComponent(a);return e.path=e.path||a,-1<e.path.indexOf("?")?e.path=e.path+"&"+n:e.path=e.path+"?"+n,e}function Mt(e){if(ze(),i.status.FnName="$appProperty","Object"!=x.paramType(e)||!e)return i.status.errorCode="600016",i.status.value=JSON.stringify(e),void V();if(Ze(e),i.base.appProperty)for(var t in e)i.base.appProperty[t]=e[t];else i.base.appProperty=e;i.status.successCode="20002",i.status.value=JSON.stringify(e),U()}function Kt(){return z.getTrackId()||z.jsId()}function Ut(){i.status.FnName="getPresetProperties",ze();var e=Be(ot("$getPresetProperties"));return delete(e=x.delEmpty(e)).xcontext.$is_login,i.status.successCode="20010",i.status.value=JSON.stringify(e.xcontext),U(),e.xcontext}var Vt=N.System.systemPromise,Yt=N.Network.netWorkPromise,qt=!0,Gt=[];function Jt(e,t,r){return function(){var a=arguments;1!=qt||0!==Object.keys(i.system.system).length&&0!==Object.keys(i.system.netWork).length?!t&&1!=i.isStartUp||1!=qt?1==r?i.FnSuperCatch.push([e,arguments]):1==qt&&!1===r?Gt.push([e,arguments]):i.FnCatch.push([e,arguments]):e.apply(e,arguments):Promise.all([Vt(),Yt(),Ft(),j.initLocalData()]).then((function(n){qt=!0,i.system.system=n[0],i.system.netWork=n[1],0<Gt.length&&(Gt[0][0](Gt[0][1]),Gt=[]),r&&1!=i.isStartUp?i.FnSuperCatch.push([e,a]):t||1==i.isStartUp?e.apply(e,a):i.FnCatch.push([e,a])})).catch((function(e){}))}}var Wt=function e(){y(this,e),this.appStart=Jt(ht,!0,!1),this.startUp=Jt(ht,!0),this.pageView=Jt(mt,!1),this.registerSuperProperty=Jt(bt,!1,!0),this.unRegisterSuperProperty=Jt(Tt,!1,!0),this.registerSuperProperties=Jt(St,!1,!0),this.getSuperProperty=At,this.getSuperProperties=_t,this.clearSuperProperties=Jt($t,!1,!0),this.alias=Jt(kt,!0),this.track=Jt(Rt,!1),this.identify=Jt(Lt,!1,!0),this.reset=Et,this.profileSet=Jt(It,!1),this.profileSetOnce=Jt(ft,!1),this.profileIncrement=Jt(Ot,!1),this.profileAppend=Jt(Pt,!1),this.profileUnset=Jt(Nt,!1),this.profileDelete=Jt(Dt,!1),this.share=xt,this.appProperty=Mt,this.getDistinctId=Kt,this.getPresetProperties=Ut},Bt=N.getPublicApp;i.isStartUp=!0,i.base.auto=!1;var zt=function(){function e(){return y(this,e),v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return m(e,Wt),f(e,[{key:"appkey",set:function(e){return ze(),"String"!==x.paramType(e)?(i.status.FnName="appkey",i.status.errorCode="60001",i.status.key=e,void V()):""==e?(i.status.FnName="appkey",i.status.errorCode="60006",void V()):(i.base.appid=e,i.status.FnName="appkey",i.status.successCode="20002",i.status.value=e,U(),i.status.successCode="20007",i.status.value=i.base.$lib_version,void U())},get:function(){return i.base.appid}},{key:"debugMode",set:function(e){ze(),i.base.$debug=e},get:function(){return i.base.$debug}},{key:"uploadURL",set:function(e){return ze(),e?x.checkURL(e)?("/"!==e.charAt(e.length-1)&&(e+="/"),i.base.uploadURL=e+"up",i.status.successCode="20008",i.status.value=e,void U()):(i.status.errorCode="600011",i.status.key="uploadURL",i.status.value=e,void V()):(i.status.errorCode="60007",void V())},get:function(){return i.base.uploadURL}},{key:"autoProfile",set:function(e){if(ze(),"Boolean"!==x.paramType(e))return i.status.key="autoProfile",i.status.errorCode="60003",i.status.value=e,void V();i.base.autoProfile=e},get:function(){return i.base.autoProfile}},{key:"encryptType",set:function(e){if(ze(),"Number"!==x.paramType(e))return i.status.key="encryptType",i.status.errorCode="60002",i.status.value=e,void V();i.base.encryptType=e},get:function(){return i.base.encryptType}},{key:"autoShare",set:function(e){if(ze(),"Boolean"!==x.paramType(e))return i.status.key="autoShare",i.status.errorCode="60003",i.status.value=e,void V();i.base.autoShare=e},get:function(){return i.base.autoShare}},{key:"allowTimeCheck",set:function(e){if(ze(),"Boolean"!==x.paramType(e))return i.status.key="allowTimeCheck",i.status.errorCode="60003",i.status.value=e,void V();i.base.allowTimeCheck=e},get:function(){return i.base.allowTimeCheck}},{key:"maxDiffTimeInterval",set:function(e){if(ze(),"Number"!==x.paramType(e))return i.status.key="maxDiffTimeInterval",i.status.errorCode="60002",i.status.value=e,void V();i.base.maxDiffTimeInterval=e},get:function(){return i.base.maxDiffTimeInterval}},{key:"requestDataType",set:function(e){if(ze(),"String"!==x.paramType(e))return i.status.FnName="requestDataType",i.status.errorCode="60001",i.status.key=e,void V();var t=e.toLowerCase();-1<["json","text","base64","arraybuffer"].indexOf(t)?(i.status.FnName="requestDataType",i.status.successCode="20002",i.status.value=t,U(),i.base.dataType=t):(i.status.FnName="requestDataType",i.status.errorCode="600022",i.status.key=e,V())},get:function(){return i.base.dataType}}]),e}(),Ht=new zt;delete Ht.startUp;var Zt=Bt();Zt&&(Zt.AnalysysAgent=Ht),module.exports=Ht;
